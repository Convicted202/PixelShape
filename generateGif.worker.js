!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=r(1),o=n(i);self.onmessage=function(t){var e=function(t,e){for(var r=0,n=-1,i=t.length;r<i&&(n*=t[r++]-e.r+t[r++]-e.g+t[r++]-e.b,r++,n);)n=-1;return!n},r=t.data,n=r.frameUUID,i=r.frameNum,a=r.framesLength,f=r.height,u=r.width,c=r.fps,s=r.imageData,l=new o.default,y=0,v={r:0,g:0,b:0},w=e(s,v);l.setRepeat(0),l.setDispose(2),l.setQuality(1),l.setFrameRate(c),l.setSize(u,f),w?l.setTransparent(y):l.setTransparent(null),0===i?l.start():(l.cont(),l.setProperties(!0,!1)),l.addFrame(s,!0),a===i+1&&l.finish(),self.postMessage({frameUUID:n,frameIndex:i,frameData:l.stream().getData()})}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(3),o=n(i),a=r(2),f=n(a),u=function(){function t(){this.bin=[]}for(var e=0,r={};e<256;e++)r[e]=String.fromCharCode(e);t.prototype.getData=function(){for(var t="",e=this.bin.length,n=0;n<e;n++)t+=r[this.bin[n]];return t},t.prototype.writeByte=function(t){this.bin.push(t)},t.prototype.writeUTFBytes=function(t){for(var e=t.length,r=0;r<e;r++)this.writeByte(t.charCodeAt(r))},t.prototype.writeBytes=function(t,e,r){for(var n=r||t.length,i=e||0;i<n;i++)this.writeByte(t[i])};var n,i,a,u,c,s,l,y,v,w={},d=null,h=-1,B=0,p=!1,m=[],g=7,b=-1,D=!1,F=!0,_=!1,M=10,T="",U=(w.setDelay=function(t){B=Math.round(t/10)},w.setDispose=function(t){t>=0&&(b=t)},w.setRepeat=function(t){t>=0&&(h=t)},w.setTransparent=function(t){d=t},w.setComment=function(t){T=t},w.addFrame=function(t,e){if(null===t||!p||null===u)throw new Error("Please call start method before calling addFrame");var r=!0;try{e?c=t:(c=t.getImageData(0,0,t.canvas.width,t.canvas.height).data,_||x(t.canvas.width,t.canvas.height)),C(),P(),F&&(S(),N(),h>=0&&j()),I(),""!==T&&E(),R(),F||N(),Q(),F=!1}catch(t){r=!1}return r},w.finish=function(){if(!p)return!1;var t=!0;p=!1;try{u.writeByte(59)}catch(e){t=!1}return t},function(){a=0,c=null,s=null,l=null,v=null,D=!1,F=!0}),x=(w.setFrameRate=function(t){15!=t&&(B=Math.round(100/t))},w.setQuality=function(t){t<1&&(t=1),M=t},w.setSize=function(t,e){p&&!F||(n=t,i=e,n<1&&(n=320),i<1&&(i=240),_=!0)}),P=(w.start=function(){U();var e=!0;D=!1,u=new t;try{u.writeUTFBytes("GIF89a")}catch(t){e=!1}return p=e},w.cont=function(){U();var e=!0;return D=!1,u=new t,p=e},function(){var t=s.length,e=t/3;l=[];var r=new o.default(s,t,M);v=r.process();for(var n=0,i=0;i<e;i++){var f=r.map(255&s[n++],255&s[n++],255&s[n++]);m[f]=!0,l[i]=f}s=null,y=8,g=7,null!==d&&(a=A(d))}),A=function(t){if(null===v)return-1;for(var e=(16711680&t)>>16,r=(65280&t)>>8,n=255&t,i=0,o=16777216,a=v.length,f=0;f<a;){var u=e-(255&v[f++]),c=r-(255&v[f++]),s=n-(255&v[f]),l=u*u+c*c+s*s,y=f/3|0;m[y]&&l<o&&(o=l,i=y),f++}return i},C=function(){var t=n,e=i;s=[];for(var r=c,o=0,a=0;a<e;a++)for(var f=0;f<t;f++){var u=a*t*4+4*f;s[o++]=r[u],s[o++]=r[u+1],s[o++]=r[u+2]}},I=function(){u.writeByte(33),u.writeByte(249),u.writeByte(4);var t,e;null===d?(t=0,e=0):(t=1,e=2),b>=0&&(e=7&b),e<<=2,u.writeByte(0|e|0|t),O(B),u.writeByte(a),u.writeByte(0)},E=function(){u.writeByte(33),u.writeByte(254),u.writeByte(T.length),u.writeUTFBytes(T),u.writeByte(0)},R=function(){u.writeByte(44),O(0),O(0),O(n),O(i),F?u.writeByte(0):u.writeByte(128|g)},S=function(){O(n),O(i),u.writeByte(240|g),u.writeByte(0),u.writeByte(0)},j=function(){u.writeByte(33),u.writeByte(255),u.writeByte(11),u.writeUTFBytes("NETSCAPE2.0"),u.writeByte(3),u.writeByte(1),O(h),u.writeByte(0)},N=function(){u.writeBytes(v);for(var t=768-v.length,e=0;e<t;e++)u.writeByte(0)},O=function(t){u.writeByte(255&t),u.writeByte(t>>8&255)},Q=function(){var t=new f.default(n,i,l,y);t.encode(u)};return w.stream=function(){return u},w.setProperties=function(t,e){p=t,F=e},w};e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function t(){var e,r,n,i,o,a,f,u,c,s,l,y,v={},w=-1,d=12,h=5003,B=d,p=1<<d,m=[],g=[],b=h,D=0,F=!1,_=0,M=0,T=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],U=[],t=v.LZWEncoder=function(t,o,a,f){e=t,r=o,n=a,i=Math.max(2,f)},x=function(t,e){U[y++]=t,y>=254&&I(e)},P=function(t){A(b),D=s+2,F=!0,S(s,t)},A=function(t){for(var e=0;e<t;++e)m[e]=-1},C=v.compress=function(t,e){var r,n,i,o,a,v,d;for(c=t,F=!1,f=c,u=E(f),s=1<<t-1,l=s+1,D=s+2,y=0,o=R(),d=0,r=b;r<65536;r*=2)++d;d=8-d,v=b,A(v),S(s,e);t:for(;(i=R())!=w;)if(r=(i<<B)+o,n=i<<d^o,m[n]!=r){if(m[n]>=0){a=v-n,0===n&&(a=1);do if((n-=a)<0&&(n+=v),m[n]==r){o=g[n];continue t}while(m[n]>=0)}S(o,e),o=i,D<p?(g[n]=D++,m[n]=r):P(e)}else o=g[n];S(o,e),S(l,e)},I=(v.encode=function(t){t.writeByte(i),o=e*r,a=0,C(i+1,t),t.writeByte(0)},function(t){y>0&&(t.writeByte(y),t.writeBytes(U,0,y),y=0)}),E=function(t){return(1<<t)-1},R=function(){if(0===o)return w;--o;var t=n[a++];return 255&t},S=function(t,e){for(_&=T[M],M>0?_|=t<<M:_=t,M+=f;M>=8;)x(255&_,e),_>>=8,M-=8;if((D>u||F)&&(F?(u=E(f=c),F=!1):(++f,u=f==B?p:E(f))),t==l){for(;M>0;)x(255&_,e),_>>=8,M-=8;I(e)}};return t.apply(this,arguments),v};e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function t(){var e,r,n,i,o,a={},f=256,u=499,c=491,s=487,l=503,y=3*l,v=f-1,w=4,d=100,h=16,B=1<<h,p=10,m=10,g=B>>m,b=B<<p-m,D=f>>3,F=6,_=1<<F,M=D*_,T=30,U=10,x=1<<U,P=8,A=1<<P,C=U+P,I=1<<C,E=[],R=[],S=[],j=[],t=a.NeuQuant=function(t,e,a){var u,c;for(r=t,n=e,i=a,o=new Array(f),u=0;u<f;u++)o[u]=new Array(4),c=o[u],c[0]=c[1]=c[2]=(u<<w+8)/f,S[u]=B/f,R[u]=0},N=function(){for(var t=[],e=new Array(f),r=0;r<f;r++)e[o[r][3]]=r;for(var n=0,i=0;i<f;i++){var a=e[i];t[n++]=o[a][0],t[n++]=o[a][1],t[n++]=o[a][2]}return t},O=function(){var t,e,r,n,i,a,u,c;for(u=0,c=0,t=0;t<f;t++){for(i=o[t],r=t,n=i[1],e=t+1;e<f;e++)a=o[e],a[1]<n&&(r=e,n=a[1]);if(a=o[r],t!=r&&(e=a[0],a[0]=i[0],i[0]=e,e=a[1],a[1]=i[1],i[1]=e,e=a[2],a[2]=i[2],i[2]=e,e=a[3],a[3]=i[3],i[3]=e),n!=u){for(E[u]=c+t>>1,e=u+1;e<n;e++)E[e]=t;u=n,c=t}}for(E[u]=c+v>>1,e=u+1;e<256;e++)E[e]=v},Q=function(){var t,o,a,f,v,h,B,p,m,g,b,D,_,U;for(n<y&&(i=1),e=30+(i-1)/3,D=r,_=0,U=n,b=n/(3*i),g=b/d|0,p=x,h=M,B=h>>F,B<=1&&(B=0),t=0;t<B;t++)j[t]=p*((B*B-t*t)*A/(B*B));for(m=n<y?3:n%u!==0?3*u:n%c!==0?3*c:n%s!==0?3*s:3*l,t=0;t<b;)if(a=(255&D[_+0])<<w,f=(255&D[_+1])<<w,v=(255&D[_+2])<<w,o=W(a,f,v),G(p,o,a,f,v),0!==B&&L(B,o,a,f,v),_+=m,_>=U&&(_-=n),t++,0===g&&(g=1),t%g===0)for(p-=p/e,h-=h/T,B=h>>F,B<=1&&(B=0),o=0;o<B;o++)j[o]=p*((B*B-o*o)*A/(B*B))},z=(a.map=function(t,e,r){var n,i,a,u,c,s,l;for(c=1e3,l=-1,n=E[e],i=n-1;n<f||i>=0;)n<f&&(s=o[n],a=s[1]-e,a>=c?n=f:(n++,a<0&&(a=-a),u=s[0]-t,u<0&&(u=-u),a+=u,a<c&&(u=s[2]-r,u<0&&(u=-u),a+=u,a<c&&(c=a,l=s[3])))),i>=0&&(s=o[i],a=e-s[1],a>=c?i=-1:(i--,a<0&&(a=-a),u=s[0]-t,u<0&&(u=-u),a+=u,a<c&&(u=s[2]-r,u<0&&(u=-u),a+=u,a<c&&(c=a,l=s[3]))));return l},a.process=function(){return Q(),z(),O(),N()},function(){var t;for(t=0;t<f;t++)o[t][0]>>=w,o[t][1]>>=w,o[t][2]>>=w,o[t][3]=t}),L=function(t,e,r,n,i){var a,u,c,s,l,y,v;for(c=e-t,c<-1&&(c=-1),s=e+t,s>f&&(s=f),a=e+1,u=e-1,y=1;a<s||u>c;){if(l=j[y++],a<s){v=o[a++];try{v[0]-=l*(v[0]-r)/I,v[1]-=l*(v[1]-n)/I,v[2]-=l*(v[2]-i)/I}catch(t){}}if(u>c){v=o[u--];try{v[0]-=l*(v[0]-r)/I,v[1]-=l*(v[1]-n)/I,v[2]-=l*(v[2]-i)/I}catch(t){}}}},G=function(t,e,r,n,i){var a=o[e];a[0]-=t*(a[0]-r)/x,a[1]-=t*(a[1]-n)/x,a[2]-=t*(a[2]-i)/x},W=function(t,e,r){var n,i,a,u,c,s,l,y,v,d;for(y=~(1<<31),v=y,s=-1,l=s,n=0;n<f;n++)d=o[n],i=d[0]-t,i<0&&(i=-i),a=d[1]-e,a<0&&(a=-a),i+=a,a=d[2]-r,a<0&&(a=-a),i+=a,i<y&&(y=i,s=n),u=i-(R[n]>>h-w),u<v&&(v=u,l=n),c=S[n]>>m,S[n]-=c,R[n]+=c<<p;return S[s]+=g,R[s]-=b,l};return t.apply(this,arguments),a};e.default=r}]);